{"version":3,"sources":["index.js"],"names":["NS","DEF_STATE_NAME","DEF_NO_STATE_NAME","ds","isBrowser","window","suppressWarnings","instances","DriftState","el","property","cssState","cssNoState","stateTarget","transitionEndCB","clearCssStateWaitTime","getTransformName","uid","getUID","canDrift","supportsTransitions","handleTransEnd","classList","add","cl","duration","forEach","itm","idx","parseFloat","getComputedStyle","to","clearTimeout","offsetWidth","setTimeout","remove","whichTransitionEvent","t","document","createElement","transitions","allTrans","style","undefined","push","length","isPropertyFound","evt","propertyName","Array","isArray","found","obj","css","evtFired","transitionEventList","fun","transitionEvent","removeEventListener","addEventListener","b","body","documentElement","s","p","v","charAt","toUpperCase","substr","i","st","transList","getPropertyValue","js","pref","Math","random","toString","replace","firstChar","parseInt","checkEl","opts","tagName","toLowerCase","err","funName","msg","val","warn","console","apply","Error","join","go","log","inst","testable","getCssState","getCssNoState","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["const NS = \"driftState\";\r\nconst DEF_STATE_NAME = \"adrift\";\r\nconst DEF_NO_STATE_NAME = \"no-drift\";\r\n\r\nvar ds = {};\r\nvar isBrowser = typeof window !== \"undefined\";\r\nif(isBrowser) ds = window[NS] = {};\r\n\r\nvar suppressWarnings = false;\r\n\r\nvar instances = [];\r\n\r\nclass DriftState {\r\n\r\n    constructor(el, property, cssState, cssNoState, stateTarget, transitionEndCB, clearCssStateWaitTime) {\r\n\r\n        this.el = el;\r\n        this.stateTarget = stateTarget || el;\r\n        \r\n        this.property = property;\r\n        if (this.property === \"transform\") this.property = getTransformName();\r\n        \r\n        this.cssState = cssState;\r\n        this.cssNoState = cssNoState;\r\n        this.uid = getUID();\r\n        this.transitionEndCB = transitionEndCB;\r\n    }\r\n\r\n    go() {\r\n        var canDrift = supportsTransitions();\r\n        var el = this.el;\r\n\r\n        if( canDrift )  handleTransEnd(el, this.stateTarget, this.cssState, this.property, this.transitionEndCB)\r\n        else            this.stateTarget.classList.add(this.cssNoState);\r\n\r\n        // check the various CSS properties to see if a duration has been set\r\n        var cl = [\"transition-duration\", \"-moz-transition-duration\", \"-webkit-transition-duration\", \"-o-transition-duration\"];\r\n        var duration = 0;\r\n        cl.forEach((itm, idx) => {\r\n            duration || (duration = parseFloat( window.getComputedStyle(el, itm) ));\r\n        });\r\n\r\n        if (el.to) clearTimeout(el.to);\r\n\r\n        // if I have a duration then add the class\r\n        if (duration !== 0) {\r\n            if( canDrift ) this.stateTarget.classList.add(this.cssState);\r\n            el.offsetWidth; // check offsetWidth to force the style rendering\r\n\r\n            // clears the css state after awhile, incase the css transition never happens (the CSS may be incorrectly set)\r\n            el.to = setTimeout(() => {\r\n                this.stateTarget.classList.remove(this.cssState);\r\n            }, clearCssStateWaitTime);\r\n        };\r\n    }\r\n}\r\n\r\n\r\n/* From Modernizr */\r\nfunction whichTransitionEvent(){\r\n    var t;\r\n    var el = document.createElement('fakeelement');\r\n    var transitions = {\r\n      'transition':'transitionend',\r\n      'OTransition':'oTransitionEnd',\r\n      'MozTransition':'transitionend',\r\n      'WebkitTransition':'webkitTransitionEnd'\r\n    }\r\n\r\n    var allTrans = [];\r\n\r\n    for (t in transitions) {\r\n        if (el.style[t] !== undefined) {\r\n            allTrans.push(transitions[t]);\r\n        }\r\n    }\r\n\r\n    if( !allTrans.length ) return null;\r\n    return allTrans;\r\n}\r\n\r\n// checks if the css property was found in the event. Transform property is an object, because it can have multiple names.\r\nfunction isPropertyFound(property, evt) {\r\n\r\n    if(typeof property === \"string\") {\r\n      // just triggers for one property type (if specified)\r\n      if (property && evt.propertyName !== property) return false;\r\n    } else if(Array.isArray(property)) {\r\n\r\n      var found = false;\r\n      property.forEach(function(obj) {\r\n        if(obj.css === evt.propertyName) found = true;\r\n      });\r\n\r\n      if(!found) return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction handleTransEnd(el, stateTarget, cssState, property, transitionEndCB) {\r\n    var evtFired = false;\r\n\r\n    var transitionEventList = whichTransitionEvent();\r\n\r\n    var fun = function fun(evt) {\r\n\r\n        // if CSS property didn't exist in the event, ignore it\r\n        if(!isPropertyFound(property, evt)) return;\r\n\r\n        // stops multiple events triggering\r\n        if (!evtFired) {\r\n            evtFired = true;\r\n            stateTarget.classList.remove(cssState);\r\n\r\n            // console.log(NS, \"trans end\");\r\n\r\n            transitionEventList.forEach(function(transitionEvent) {\r\n              el.removeEventListener(transitionEvent, fun);\r\n            });\r\n\r\n            if(transitionEndCB) transitionEndCB(el, stateTarget, cssState, property);\r\n        }\r\n    };\r\n    if(transitionEventList){\r\n      // console.log(NS, transitionEventList)\r\n      transitionEventList.forEach(function(transitionEvent) {\r\n        el.addEventListener(transitionEvent, fun, false);\r\n      });\r\n    }\r\n}\r\n\r\n\r\n// Checks if transitions are supported\r\nfunction supportsTransitions() {\r\n    var b = document.body || document.documentElement,\r\n        s = b.style,\r\n        p = 'transition';\r\n\r\n    if (typeof s[p] == 'string') { return true; }\r\n\r\n    // Tests for vendor specific prop\r\n    var v = ['Moz', 'webkit', 'Webkit', 'Khtml', 'O', 'ms'];\r\n    p = p.charAt(0).toUpperCase() + p.substr(1);\r\n\r\n    for (var i=0; i<v.length; i++) {\r\n        if (typeof s[v[i] + p] == 'string') { return true; }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n// gets the CSS & JS name of the 'transform' property, which can vary from browser to browser\r\nfunction getTransformName() {\r\n    var st = window.getComputedStyle(document.body, null);\r\n\r\n    var transList = [];\r\n\r\n    if (st.getPropertyValue(\"transform\") !== null) {\r\n        transList.push({\r\n          css: \"transform\", \r\n          js: \"transform\"\r\n        });\r\n    }\r\n\r\n    if (st.getPropertyValue(\"-webkit-transform\") !== null) {\r\n        transList.push({\r\n          css: \"-webkit-transform\", \r\n          js: \"webkitTransform\"\r\n        });\r\n    }\r\n\r\n    if (st.getPropertyValue(\"-moz-transform\") !== null) {\r\n        transList.push({\r\n          css: \"-moz-transform\", \r\n          js: \"MozTransform\"\r\n        });\r\n    }\r\n\r\n    if (st.getPropertyValue(\"-ms-transform\") !== null) {\r\n        transList.push({\r\n          css: \"-ms-transform\", \r\n          js: \"msTransform\"\r\n        });\r\n    }\r\n\r\n    if (st.getPropertyValue(\"-o-transform\") !== null) {\r\n        transList.push({\r\n          css: \"-o-transform\", \r\n          js: \"OTransform\"\r\n        });\r\n    }\r\n\r\n    if(!transList.length) return null;\r\n    return transList;\r\n}\r\n\r\n\r\n/**\r\n * @description Gets a unique string, with an optional prefix that can be useful for human readability.\r\n * @param pref (string) optional - A prefix string for the unique id.\r\n * @return (string) The unique id.\r\n */\r\nfunction getUID(pref) {\r\n    var uid = (pref || \"\") + Math.random().toString().replace(\".\", \"\");\r\n\r\n    // ensure starts with a letter, as CSS class names should not start with a number\r\n    var firstChar = uid.substr(0,1);\r\n    if( parseInt(firstChar).toString() !== \"NaN\" ) uid = \"a-\"+uid;\r\n\r\n    return uid;\r\n}\r\n\r\n// check if given object has is an HTMLElement called 'el'\r\nfunction checkEl(opts) {\r\n    if(!opts.el) return false;\r\n    return (typeof opts.el.tagName).toLowerCase() !== \"string\";\r\n}\r\n\r\nfunction err(funName, msg, val) {\r\n    var warn = [NS, funName];\r\n    if(typeof val !== \"undefined\") warn.push(val);\r\n    if(!suppressWarnings) console.warn.apply(this, warn);\r\n    throw Error([NS, funName, msg].join(\", \"));\r\n}\r\n\r\n\r\n// main initializing function. Returns opts, which may have been modified.\r\nds.go = function(opts) {\r\n    \r\n    // check opts are valid first\r\n    if(!opts) err(\"go\", \"'opts' was not defined\", opts);\r\n    if(checkEl(opts)) err(\"go\", \"'opts.el' was not an HTMLElement\", opts.el);\r\n    if(opts.stateTarget && checkEl(opts)) err(\"go\", \"'opts.stateTarget' was not an HTMLElement\", opts.stateTarget);\r\n    if(typeof opts.property !== \"string\") err(\"go\", \"'opts.property' was not a valid string\", opts.property);\r\n    \r\n    if(typeof opts.cssState !== \"string\") {\r\n        opts.cssState = DEF_STATE_NAME;\r\n        if(!suppressWarnings)\r\n            console.log(NS, \"go\", \"No 'opts.cssState' given, so defaulting to \" + DEF_STATE_NAME + \".\");\r\n    }\r\n    \r\n    if(typeof opts.cssNoState !== \"string\") {\r\n        opts.cssNoState = DEF_NO_STATE_NAME;\r\n        if(!suppressWarnings)\r\n            console.log(NS, \"go\", \"No 'opts.cssNoState' given, so defaulting to \" + DEF_NO_STATE_NAME + \".\");\r\n    }\r\n\r\n    if (!opts.clearCssStateWaitTime) opts.clearCssStateWaitTime = 5000;\r\n\r\n    var inst = new DriftState(opts.el, opts.property, opts.cssState, opts.cssNoState, opts.stateTarget, opts.transitionEndCB, opts.clearCssStateWaitTime);\r\n    instances.push(inst);\r\n\r\n    if(isBrowser) inst.go();\r\n\r\n    return inst;\r\n}\r\n\r\nds.testable = {\r\n    suppressWarnings: function(val) {\r\n        suppressWarnings = val;\r\n    },\r\n    getCssState: function() {\r\n        return DEF_STATE_NAME;\r\n    },\r\n    getCssNoState: function() {\r\n        return DEF_NO_STATE_NAME;\r\n    },\r\n    getUID: getUID\r\n}\r\n\r\n// make available in Common.js\r\nif(!isBrowser) module.exports = ds; "],"sourceRoot":"/source/"}