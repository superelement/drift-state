{"version":3,"sources":["index.js"],"names":["NS","DEF_STATE_NAME","DEF_NO_STATE_NAME","ds","isNode","module","exports","isBrowser","window","suppressWarnings","instances","DriftState","el","property","cssState","cssNoState","stateTarget","transitionEndCB","clearCssStateWaitTime","getTransformName","uid","getUID","canDrift","supportsTransitions","handleTransEnd","classList","add","cl","duration","forEach","itm","idx","parseFloat","getComputedStyle","to","clearTimeout","offsetWidth","setTimeout","remove","whichTransitionEvent","t","document","createElement","transitions","allTrans","style","undefined","push","length","isPropertyFound","evt","propertyName","Array","isArray","found","obj","css","evtFired","transitionEventList","fun","transitionEvent","removeEventListener","addEventListener","b","body","documentElement","s","p","v","charAt","toUpperCase","substr","i","st","transList","getPropertyValue","js","pref","Math","random","toString","replace","firstChar","parseInt","checkEl","opts","tagName","toLowerCase","err","funName","msg","val","warn","console","apply","Error","join","go","showLogs","log","inst","testable","getCssState","getCssNoState"],"mappings":"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","file":"index.js","sourcesContent":["const NS = \"driftState\";\nconst DEF_STATE_NAME = \"adrift\";\nconst DEF_NO_STATE_NAME = \"no-drift\";\n\nvar ds = {};\nvar isNode = !!(typeof module !== 'undefined' && module.exports);\nvar isBrowser = typeof window !== \"undefined\";\nvar suppressWarnings = false;\n\nif(isBrowser) ds = window[NS] = {};\n\n\nvar instances = [];\n\nclass DriftState {\n\n    constructor(el, property, cssState, cssNoState, stateTarget, transitionEndCB, clearCssStateWaitTime) {\n\n        this.el = el;\n        this.stateTarget = stateTarget || el;\n        \n        this.property = property;\n        if (this.property === \"transform\") this.property = getTransformName();\n        \n        this.cssState = cssState;\n        this.cssNoState = cssNoState;\n        this.uid = getUID();\n        this.transitionEndCB = transitionEndCB;\n        this.clearCssStateWaitTime = clearCssStateWaitTime;\n    }\n\n    go() {\n        var canDrift = supportsTransitions();\n        var el = this.el;\n\n        if( canDrift )  handleTransEnd(el, this.stateTarget, this.cssState, this.property, this.transitionEndCB)\n        else            this.stateTarget.classList.add(this.cssNoState);\n\n        // check the various CSS properties to see if a duration has been set\n        var cl = [\"transition-duration\", \"-moz-transition-duration\", \"-webkit-transition-duration\", \"-o-transition-duration\"];\n        var duration = 0;\n        cl.forEach((itm, idx) => {\n            duration || (duration = parseFloat( window.getComputedStyle(el, itm) ));\n        });\n\n        if (el.to) clearTimeout(el.to);\n\n        // if I have a duration then add the class\n        if (duration !== 0) {\n            if( canDrift ) this.stateTarget.classList.add(this.cssState);\n            el.offsetWidth; // check offsetWidth to force the style rendering\n\n            // clears the css state after awhile, incase the css transition never happens (the CSS may be incorrectly set)\n            el.to = setTimeout(() => {\n                this.stateTarget.classList.remove(this.cssState);\n            }, this.clearCssStateWaitTime);\n        };\n    }\n}\n\n\n/* From Modernizr */\nfunction whichTransitionEvent(){\n    var t;\n    var el = document.createElement('fakeelement');\n    var transitions = {\n      'transition':'transitionend',\n      'OTransition':'oTransitionEnd',\n      'MozTransition':'transitionend',\n      'WebkitTransition':'webkitTransitionEnd'\n    }\n\n    var allTrans = [];\n\n    for (t in transitions) {\n        if (el.style[t] !== undefined) {\n            allTrans.push(transitions[t]);\n        }\n    }\n\n    if( !allTrans.length ) return null;\n    return allTrans;\n}\n\n// checks if the css property was found in the event. Transform property is an object, because it can have multiple names.\nfunction isPropertyFound(property, evt) {\n\n    if(typeof property === \"string\") {\n      // just triggers for one property type (if specified)\n      if (property && evt.propertyName !== property) return false;\n    } else if(Array.isArray(property)) {\n\n      var found = false;\n      property.forEach(function(obj) {\n        if(obj.css === evt.propertyName) found = true;\n      });\n\n      if(!found) return false;\n    }\n\n    return true;\n}\n\nfunction handleTransEnd(el, stateTarget, cssState, property, transitionEndCB) {\n    var evtFired = false;\n\n    var transitionEventList = whichTransitionEvent();\n\n    var fun = function fun(evt) {\n\n        // if CSS property didn't exist in the event, ignore it\n        if(!isPropertyFound(property, evt)) return;\n\n        // stops multiple events triggering\n        if (!evtFired) {\n            evtFired = true;\n            stateTarget.classList.remove(cssState);\n\n            // console.log(NS, \"trans end\");\n\n            transitionEventList.forEach(function(transitionEvent) {\n              el.removeEventListener(transitionEvent, fun);\n            });\n\n            if(transitionEndCB) transitionEndCB(el, stateTarget, cssState, property);\n        }\n    };\n    if(transitionEventList){\n      // console.log(NS, transitionEventList)\n      transitionEventList.forEach(function(transitionEvent) {\n        el.addEventListener(transitionEvent, fun, false);\n      });\n    }\n}\n\n\n// Checks if transitions are supported\nfunction supportsTransitions() {\n    var b = document.body || document.documentElement,\n        s = b.style,\n        p = 'transition';\n\n    if (typeof s[p] == 'string') { return true; }\n\n    // Tests for vendor specific prop\n    var v = ['Moz', 'webkit', 'Webkit', 'Khtml', 'O', 'ms'];\n    p = p.charAt(0).toUpperCase() + p.substr(1);\n\n    for (var i=0; i<v.length; i++) {\n        if (typeof s[v[i] + p] == 'string') { return true; }\n    }\n\n    return false;\n}\n\n// gets the CSS & JS name of the 'transform' property, which can vary from browser to browser\nfunction getTransformName() {\n    var st = window.getComputedStyle(document.body, null);\n\n    var transList = [];\n\n    // removed 'null' check because it came in as empty string on chrome android\n\n    if (st.getPropertyValue(\"transform\")) { \n        transList.push({ \n          css: \"transform\",  \n          js: \"transform\" \n        }); \n    } \n \n    if (st.getPropertyValue(\"-webkit-transform\")) { \n        transList.push({ \n          css: \"-webkit-transform\",  \n          js: \"webkitTransform\" \n        }); \n    } \n \n    if (st.getPropertyValue(\"-moz-transform\")) { \n        transList.push({ \n          css: \"-moz-transform\",  \n          js: \"MozTransform\" \n        }); \n    } \n \n    if (st.getPropertyValue(\"-ms-transform\")) { \n        transList.push({ \n          css: \"-ms-transform\",  \n          js: \"msTransform\" \n        }); \n    } \n \n    if (st.getPropertyValue(\"-o-transform\")) { \n        transList.push({ \n          css: \"-o-transform\",  \n          js: \"OTransform\" \n        }); \n    } \n\n    if(!transList.length) return null;\n    return transList;\n}\n\n\n/**\n * @description Gets a unique string, with an optional prefix that can be useful for human readability.\n * @param pref (string) optional - A prefix string for the unique id.\n * @return (string) The unique id.\n */\nfunction getUID(pref) {\n    var uid = (pref || \"\") + Math.random().toString().replace(\".\", \"\");\n\n    // ensure starts with a letter, as CSS class names should not start with a number\n    var firstChar = uid.substr(0,1);\n    if( parseInt(firstChar).toString() !== \"NaN\" ) uid = \"a-\"+uid;\n\n    return uid;\n}\n\n// check if given object has is an HTMLElement called 'el'\nfunction checkEl(opts) {\n    if(!opts.el) return false;\n    return (typeof opts.el.tagName).toLowerCase() !== \"string\";\n}\n\nfunction err(funName, msg, val) {\n    var warn = [NS, funName];\n    if(typeof val !== \"undefined\") warn.push(val);\n    if(!suppressWarnings) console.warn.apply(this, warn);\n    throw Error([NS, funName, msg].join(\", \"));\n}\n\n\n// main initializing function. Returns opts, which may have been modified.\nds.go = function(opts) {\n\n    suppressWarnings = !opts.showLogs;\n    \n    // check opts are valid first\n    if(!opts) err(\"go\", \"'opts' was not defined\", opts);\n    if(checkEl(opts)) err(\"go\", \"'opts.el' was not an HTMLElement\", opts.el);\n    if(opts.stateTarget && checkEl(opts)) err(\"go\", \"'opts.stateTarget' was not an HTMLElement\", opts.stateTarget);\n    if(typeof opts.property !== \"string\") err(\"go\", \"'opts.property' was not a valid string\", opts.property);\n    \n    if(typeof opts.cssState !== \"string\") {\n        opts.cssState = DEF_STATE_NAME;\n        if(!suppressWarnings)\n            console.log(NS, \"go\", \"No 'opts.cssState' given, so defaulting to \" + DEF_STATE_NAME + \".\");\n    }\n    \n    if(typeof opts.cssNoState !== \"string\") {\n        opts.cssNoState = DEF_NO_STATE_NAME;\n        if(!suppressWarnings)\n            console.log(NS, \"go\", \"No 'opts.cssNoState' given, so defaulting to \" + DEF_NO_STATE_NAME + \".\");\n    }\n\n    if (!opts.clearCssStateWaitTime) opts.clearCssStateWaitTime = 5000;\n\n    var inst = new DriftState(opts.el, opts.property, opts.cssState, opts.cssNoState, opts.stateTarget, opts.transitionEndCB, opts.clearCssStateWaitTime);\n    instances.push(inst);\n\n    if(isBrowser) inst.go();\n\n    return inst;\n}\n\nds.testable = {\n    suppressWarnings: function(val) {\n        suppressWarnings = val;\n    },\n    getCssState: function() {\n        return DEF_STATE_NAME;\n    },\n    getCssNoState: function() {\n        return DEF_NO_STATE_NAME;\n    },\n    getUID: getUID\n}\n\n// make available in Common.js\nif(isNode) module.exports = ds; "]}